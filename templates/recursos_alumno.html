<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Recursos - Alumno</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='visualizar.css') }}">

</head>

<body>

    <div class="header-section">
        <h1>Recursos Disponibles</h1>
        <p>Bienvenido, <strong>{{ usuario }}</strong>. Aqu√≠ puedes consultar y descargar los recursos educativos.</p>
    </div>

    <!-- üîç BUSCAR -->
    <div class="busqueda-container">
        <h3 style="margin-bottom: 15px; color: #2c3e50;">üîç Buscar Recursos</h3>
        <form method="POST" action="/recursos">
            <input type="text" name="busqueda" placeholder="Buscar por nombre, materia, tipo...">
            <button type="submit">Buscar</button>
            <button type="button" onclick="buscarVoz()">üé§</button>
        </form>
    </div>


    <div style="margin-top: 30px; text-align: center;">
        <a href="{{ url_for('menu') }}">‚Üê Volver al men√∫
        </a>
    </div>
       <table>
        <tr>
            <th>ID</th>
            <th>Fecha</th>
            <th>Nombre</th>
            <th>Materia</th>
            <th>Tipo</th>
            <th>Acciones</th>
        </tr>

        {% for r in recursos %}
        <tr>
            <td>{{ r.id }}</td>
            <td>{{ r.fecha }}</td>
            <td>{{ r.nombre }}</td>
            <td>{{ r.materia }}</td>
            <td>{{ r.tipo }}</td>
            <td>
                <a href="/recursos/descargar/{{ r.id }}" style="color: #3498db;">üì• Descargar</a>
                <a href="/recursos/visualizar/{{ r.id }}" style="color: #3498db;">Visualizar</a>
            </td>
        </tr>
        {% endfor %}
    </table>

    <script>
        function buscarVoz() {
            if (!('webkitSpeechRecognition' in window)) {
                alert("Tu navegador no soporta reconocimiento de voz");
                return;
            }

            let reconocimiento = new webkitSpeechRecognition();
            reconocimiento.lang = "es-MX";
            reconocimiento.continuous = false;
            reconocimiento.interimResults = false;

            reconocimiento.start();

            reconocimiento.onresult = function (event) {
                const texto = event.results[0][0].transcript;
                document.querySelector("input[name='busqueda']").value = texto;
                document.querySelector("form").submit();
            };
        }
    </script>

</body>

</html>