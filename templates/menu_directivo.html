<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menú Directivos</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='menu.css') }}">
</head>
<script>
    let inactivityTimeout;
    const TIMEOUT_DURATION = 60000; // 1 minuto

    function resetInactivityTimer() {
        clearTimeout(inactivityTimeout);
        inactivityTimeout = setTimeout(logoutDueToInactivity, TIMEOUT_DURATION);
    }

    function logoutDueToInactivity() {
        fetch('/logout_inactivity', { method: 'POST' })
            .then(() => {
                window.location.href = '/';
            });
    }

    // Seguimiento de actividad del usuario
    ['mousedown', 'mousemove', 'keypress', 'scroll', 'touchstart'].forEach(event => {
        document.addEventListener(event, resetInactivityTimer, true);
    });

    resetInactivityTimer();
</script>

<body>

    <div class="sidebar">
        <!-- Perfil con inicial -->
        <div class="profile-initial">
            <div class="initial">{{ nombre_completo[0]|upper }}</div>
            <h3>{{ nombre_completo }}</h3>
            <p>Directivo</p>
        </div>

        <ul>
            <li><a href="/alumnos">Alumnos</a></li>
            <li><a href="/docentes">Docentes</a></li>
            <li><a href="/orientadores">Orientadores</a></li>
            <li><a href="/directivos">Directivos</a></li>
            <li><a href="/recursos">Recursos</a></li>
            <li><a href="/materias">Materias</a></li>
        </ul>
    </div>

    <div class="main-content">
        <h1>Bienvenido, {{ nombre_completo }}</h1>
        <h3>Rol: Directivo</h3>

        <div class="menu-grid">
            <div class="menu-card"><a href="/alumnos">Alumnos</a></div>
            <div class="menu-card"><a href="/docentes">Docentes</a></div>
            <div class="menu-card"><a href="/orientadores">Orientadores</a></div>
            <div class="menu-card"><a href="/directivos">Directivos</a></div>
            <div class="menu-card"><a href="/recursos">Recursos</a></div>
            <div class="menu-card"><a href="/materias">Materias</a></div>
        </div>

        <div style="text-align:center; margin-top:30px;">
            <a href="{{ url_for('logout') }}" class="logout">Cerrar sesión</a>
        </div>
    </div>

</body>

</html>